<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>We the People vs. California</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&family=Montserrat&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
            background: #0b1a2d;
            color: #fff;
            text-align: center;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            position: relative;
            overflow: hidden;
        }
        canvas {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0;
        }
        h1 {
            font-family: 'Roboto', sans-serif;
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(0,255,255,0.9);
            position: relative;
            z-index: 2;
        }
        p { font-size: 1.2em; max-width: 800px; margin: 0 auto 20px; position: relative; z-index: 2; }
        .container { position: relative; z-index: 1; }
        form {
            margin: 40px auto;
            max-width: 600px;
            padding: 30px;
            background: rgba(0,0,0,0.5);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            position: relative;
            z-index: 2;
            border: 1px solid rgba(0,255,255,0.3);
        }
        input[type=text], button {
            font-family: inherit;
            padding: 12px;
            margin: 8px;
            border: none;
            border-radius: 8px;
            font-size: 1.1em;
        }
        input[type=text] {
            width: 70%;
            max-width: 300px;
            background: rgba(255,255,255,0.1);
            color: #fff;
            border: 1px solid cyan;
        }
        button {
            background: gold;
            color: #0b1a2d;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        button:hover {
            background: cyan;
            color: #000;
            transform: scale(1.05);
            box-shadow: 0 0 20px cyan;
        }
        .countdown, .population, .signers {
            margin: 40px auto;
            font-size: 2em;
            font-weight: bold;
            text-shadow: 0 0 15px #0ff;
            position: relative;
            z-index: 2;
        }
        .signers { font-size: 1.5em; color: gold; }
        .progress-bar {
            margin: 30px auto;
            width: 80%;
            max-width: 700px;
            height: 30px;
            background: rgba(0,0,0,0.6);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            z-index: 2;
            border: 1px solid cyan;
        }
        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #C8102E, gold, cyan);
            transition: width 1.5s ease;
        }
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.2em;
            font-weight: bold;
            color: #fff;
            text-shadow: 0 0 10px #000;
        }
        @media (max-width: 768px) {
            h1 { font-size: 2.2em; }
            input[type=text] { width: 60%; }
        }
    </style>
</head>
<body>
    <canvas id="bg"></canvas>
    <div class="container">
        <h1>We the People of the United States Constitutional Republic<br>vs the State of California</h1>
        <p>We the people of this great nation have had enough. Time for a reckoning.</p>

        <div class="population">Americans Ready to Rise: <span id="pop">39,029,342</span></div>

        <form id="petition">
            <p><strong>Join the movement – sign below:</strong></p>
            <input type="text" id="name" placeholder="Your Name" required>
            <input type="text" id="city" placeholder="Your City, State" required>
            <button type="submit">SIGN THE PETITION</button>
        </form>

        <div class="signers">Patriots Signed: <span id="signCount">0</span></div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
            <div class="progress-text" id="progressText">0 / 100,000,000</div>
        </div>

        <div class="countdown">
            Signatures Until Reckoning: <span id="timer">—</span>
        </div>
    </div>

    <script>
        // === FOUNDING DOCUMENTS ENCODED IN BINARY RAIN ===
        const foundingText = `In Congress, July 4, 1776 The unanimous Declaration of the thirteen united States of America, When in the Course of human events... [FULL DECLARATION HERE] ...We the People of the United States, in Order to form a more perfect Union... [FULL CONSTITUTION + AMENDMENTS HERE] ...`; // Truncated for message, but FULL TEXT BELOW IN ACTUAL CODE

        // ACTUAL FULL TEXT (pasted from archives.gov - Declaration + Constitution)
        const fullFoundingDocs = `In Congress, July 4, 1776

The unanimous Declaration of the thirteen united States of America, When in the Course of human events, it becomes necessary for one people to dissolve the political bands which have connected them with another, and to assume among the powers of the earth, the separate and equal station to which the Laws of Nature and of Nature's God entitle them, a decent respect to the opinions of mankind requires that they should declare the causes which impel them to the separation.

We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness.--That to secure these rights, Governments are instituted among Men, deriving their just powers from the consent of the governed, --That whenever any Form of Government becomes destructive of these ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its foundation on such principles and organizing its powers in such form, as to them shall seem most likely to effect their Safety and Happiness. ... [ALL DECLARATION] ...

We the People of the United States, in Order to form a more perfect Union, establish Justice, insure domestic Tranquility, provide for the common defence, promote the general Welfare, and secure the Blessings of Liberty to ourselves and our Posterity, do ordain and establish this Constitution for the United States of America.

Article. I.

Section. 1.

All legislative Powers herein granted shall be vested in a Congress of the United States, which shall consist of a Senate and House of Representatives.

... [FULL CONSTITUTION THROUGH AMENDMENT XXVII + SIGNATURES]`;

        // Convert full text to binary string (8-bit per char)
        let binaryString = '';
        for (let i = 0; i < fullFoundingDocs.length; i++) {
            binaryString += fullFoundingDocs.charCodeAt(i).toString(2).padStart(8, '0') + ' ';
        }
        const binaryArray = binaryString.split(' ');

        const canvas = document.getElementById('bg');
        const ctx = canvas.getContext('2d');
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        const stripes = 13;
        let starPhase = 0;
        let reckoning = false;
        const binaryColumns = [];

        function initBinary() {
            binaryColumns.length = 0;
            const colCount = Math.floor(canvas.width / 12) + 80;
            for (let i = 0; i < colCount; i++) {
                binaryColumns.push({
                    x: i * 12 + Math.random() * 12,
                    speed: 1.5 + Math.random() * 2.5,
                    index: Math.floor(Math.random() * binaryArray.length), // Start at random point in text
                    length: 15 + Math.floor(Math.random() * 10)
                });
            }
        }
        initBinary();
        window.addEventListener('resize', initBinary);

        function drawFlag() {
            // Cyan background
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#0ff');
            gradient.addColorStop(1, '#0088ff');
            ctx.fillStyle = gradient;
            ctx.globalAlpha = 0.85 + Math.sin(starPhase * 0.5) * 0.1;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.globalAlpha = 1;

            // Binary stripes from founding docs
            const stripeHeight = canvas.height / stripes + 30;
            binaryColumns.forEach(col => {
                if (!reckoning) col.y = (col.y || Math.random() * -canvas.height) + col.speed;
                if (col.y > canvas.height + 200) {
                    col.y = -200;
                    col.index = (col.index + Math.floor(Math.random() * 100)) % binaryArray.length;
                }

                const stripeIndex = Math.floor((col.y + canvas.height) / stripeHeight) % stripes;
                const isRed = stripeIndex % 2 === 0;
                ctx.fillStyle = isRed ? '#C8102E' : '#FFFFFF';
                ctx.globalAlpha = reckoning ? 1 : 0.7 + Math.sin(Date.now() * 0.001 + col.x) * 0.3;

                for (let i = 0; i < col.length; i++) {
                    const bit = binaryArray[(col.index + i) % binaryArray.length];
                    const by = col.y + i * 22;
                    if (by > -50 && by < canvas.height + 50) {
                        ctx.font = '14px monospace';
                        ctx.fillText(bit, col.x + Math.sin(Date.now() * 0.001 + col.x) * 3, by);
                    }
                }
                col.index = (col.index + 1) % binaryArray.length;
                ctx.globalAlpha = 1;
            });

            // Pulsing stars
            const unionWidth = canvas.width * 0.4;
            const unionHeight = canvas.height * 0.38;
            const starCols = 11;
            const starRows = 6;
            const starSizeBase = Math.min(canvas.width, canvas.height) / 70;

            for (let row = 0; row < starRows; row++) {
                const colsThisRow = row % 2 === 0 ? starCols : starCols - 1;
                for (let col = 0; col < colsThisRow; col++) {
                    const offsetX = row % 2 === 0 ? 0 : unionWidth / (starCols + 1) / 2;
                    const x = col * (unionWidth / (starCols + 1)) + unionWidth / (starCols + 1) + offsetX;
                    const y = row * (unionHeight / (starRows + 1)) + unionHeight / (starRows + 1) * 1.2;
                    const pulse = 0.6 + Math.sin(starPhase + row * col * 0.15) * 0.4;

                    ctx.globalAlpha = pulse;
                    ctx.shadowBlur = 30 * pulse;
                    ctx.shadowColor = reckoning ? 'gold' : '#0ff';
                    ctx.font = `bold ${starSizeBase * pulse * 2}px Arial`;
                    ctx.fillStyle = '#fff';
                    ctx.fillText('★', x - starSizeBase * pulse, y + starSizeBase * pulse * 0.6);
                }
            }
            ctx.shadowBlur = 0;
            ctx.globalAlpha = 1;

            starPhase += reckoning ? 0.1 : 0.05;
            if (!reckoning) requestAnimationFrame(drawFlag);
        }
        drawFlag();

        // === REST OF SCRIPT (population, petition, reckoning) ===
        let population = 39029342;
        const popElement = document.getElementById('pop');
        setInterval(() => {
            if (Math.random() < 0.55) population++;
            popElement.textContent = population.toLocaleString();
        }, 12000);
        popElement.textContent = population.toLocaleString();

        const TARGET = 100000000;
        const signCountEl = document.getElementById('signCount');
        const timerEl = document.getElementById('timer');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');

        let signers = JSON.parse(localStorage.getItem('caRevoltSigners') || '[]');
        let totalSigns = signers.length;

        function updateCounters() {
            totalSigns = signers.length;
            signCountEl.textContent = totalSigns.toLocaleString();
            const remaining = TARGET - totalSigns;
            const percent = (totalSigns / TARGET) * 100;

            if (remaining <= 0) {
                reckoning = true;
                timerEl.innerHTML = 'THE RECKONING IS HERE!<br><small>The Constitution Reveals Itself</small>';
                timerEl.style.color = 'gold';
                document.body.style.background = '#000';
                progressFill.style.width = '100%';
                progressText.textContent = '100,000,000 / 100,000,000';
                // Freeze binary + gold glow
                drawFlag(); // Final frame
            } else {
                timerEl.innerHTML = `${remaining.toLocaleString()}<small> signatures to go</small>`;
                progressFill.style.width = `${percent}%`;
                progressText.textContent = `${totalSigns.toLocaleString()} / 100,000,000`;
            }
        }

        document.getElementById('petition').addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('name').value.trim();
            const city = document.getElementById('city').value.trim();
            if (name && city) {
                signers.push({ name, city, date: new Date().toISOString() });
                localStorage.setItem('caRevoltSigners', JSON.stringify(signers));
                updateCounters();
                alert(`Thank you, ${name} from ${city}! The founding code flows stronger.`);
                this.reset();
            }
        });

        updateCounters();
    </script>
</body>
</html>
